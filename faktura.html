<!DOCTYPE HTML>
<html lang="pl">

<head>
	<meta charset="utf-8" />
	<title>SPERARE - Faktura</title>
	
		
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	
	<link rel="stylesheet" href="style.css" type="text/css" />
	
	<script>
		
	</script>
</head>

<body>

		<div id="Faktura">
	
			<div class="LogoF">
				<img src="img/reka3.png">
			</div><!-- zamknięcie diva LogoF -->
			
			<div class="MiejsceData">
				<label>Miejsce wystawienia:</label> 
				<label id="Miejsce">Katowice</label>
				<p>
					<label>Data wystawienia: </label>
					<label id="DataW">09-12-2017</label>
				</p>
				<p>
					<label>Data sprzedaży/wykonania usługi: </label>
					<label id="DataS">09-12-2017</label>
				</p>
			</div> <!-- zamknięcie diva MiejsceData -->
			
			<div class="Belka">
				<label>Faktura nr:</label>
				<label id="NrFaktury">1/1/2017</label>
				<label id="Oryginal">ORYGINAŁ</label>
			</div> <!-- zamknięcie diva Belka -->
			
			<div class="Sprzedawca">
				<label style="font-weight: bold;">Sprzedawca:</label>
				<div class="S1">
					<label>Sabina Błędzińska Centrum Terapeutyczne SPERARE</label>
				</div>
				<div class="S2">
					<label>ul. Głogowska 28</label>
				</div>
				<div class="S3">
					<label>40-660 Katowice</label>
				</div>
				<div class="S4">
					<label>NIP: 549-202-75-55; REGON: 360848725</label>
				</div>
				<div class="S5">
					<label>www.sperare.pl; e-mail: sperare@sperare.pl</label>
				</div>
				<div class="S6">
					<label>tel.: 604-149-003</label>
				</div>
				<div class="S7">
					<label>Bank PEKAO SA, nr konta: 06 1240 4155 1111 0010 6271 0270</label>
				</div>
			</div> <!-- zamknięcie diva Sprzedawca -->
			
			<div class="Nabywca">
				<label style="font-weight: bold;">Nabywca:</label>
				
				<div class="N1">
					<label id="Platnik">Płatnik</label>
				</div>
				<div class="N2">
					<label id="Adres1N">ul. ?????????????</label>
				</div>
				<div class="N3">
					<label id="Adres2N">XX-XXX YYYYYYYYYY</label>
				</div>
				<div class="N4">
					<label id="NipN">NIP: yyy-yyy-yy-yy</label>
				</div>
				<div class="Odbiorca">
					<label style="font-weight: bold;">Odbiorca:</label>
					
					<div class="O1">
						<label id="NazwaO">Odbiorca faktury</label>
					</div>
					<div class="O2">
						<label id="Adres1Odb">ul. CośTam</label>
					</div>
					<div class="O3">
						<label id="Adres2Odb">11-111 CośTam CośTam</label>
					</div>
					<div class="O4">
						<label id="NipO">NIP: 111-111-11-11</label>
					</div>
				</div>
				
			</div> <!-- zamknięcie diva Nabywca -->
			
			<div id="Tabela">
				<table id="TabelaSprzedazy">
					<thead>
						<tr class="Naglowki">
							<th rowspan="2">Lp.</th>
							<th rowspan="2">Nazwa usługi/towaru</th> 
							<th rowspan="2">j.m.</th>
							<th rowspan="2">Ilość</th>
							<th rowspan="2">Cena [zł]</th>
							<th colspan="2">Podatek VAT</th>
							<th rowspan="2">Watość bez VAT</th>
							<th rowspan="2">Watość z VAT</th>
						</tr>
						<tr class="Naglowki">
							
							<th>[%]</th>
							<th>[zł]</th>
							
						</tr>
					</thead>
					<tbody id="tBody">
						<tr id="Linia1" onChange="aktualizacja1(this)">
							<td class="Lp">1</td>
							<td class="NazwaUslugi">Wybierz Nazwę Usługi</td> 
							<td class="Jm">szt.</td>
							<td class="Ilosc"><input id="IloscGodzin"></input></td>
							<td class="Cena"><input id="CenaZajec"></input></td>
							<td class="VatPr">zw</td>
							<td class="VatZl"></td>
							<td class="BezVat"></td>
							<td class="ZVat"></td>
						</tr>
					</tbody>
					<tfoot>
					
					</tfoot>
				</table>
				
				
			</div> <!-- zamknięcie diva Tabela -->
			
			<div class="Platnosc">
				
			</div> <!-- zamknięcie diva Płatność -->
			
			<div id="TabelaSum">
				<table id="PodsumowanieVat">
					<tr class="zw">
						<td style="font-weight: bold;">zw</td>
						<td class="sumka">0</td> 
						<td class="sumka">0</td>
						<td class="sumka">0</td>
					</tr>
					<tr class="zero">
						<td style="font-weight: bold;">0%</td>
						<td class="sumka">0</td> 
						<td class="sumka">0</td>
						<td class="sumka">0</td>
					</tr>
					<tr class="osiem">
						<td style="font-weight: bold;">8%</td>
						<td class="sumka">0</td> 
						<td class="sumka">0</td>
						<td class="sumka">0</td>
					</tr>
					<tr class="dwatrzy">
						<td style="font-weight: bold;">23%</td>
						<td class="sumka">0</td> 
						<td class="sumka">0</td>
						<td class="sumka">0</td>
					</tr>
					<tr class="Sumy">
						<th class="Razem">RAZEM</th>
						<th class="ZlVat"></th> 
						<th class="WartoscBezVat"></th>
						<th class="WartoscZVat"></th>
					</tr>
				</table>
				
				<p>Stawka "zw" - zwolnienie z podatku na podstawie art. 43 ust. 1 pkt 19 ustawy o VAT</p>
			
			</div> <!-- zamknięcie diva TabelaSum -->
			
			<div class="Podsumowanie">
			
			</div> <!-- zamknięcie diva Podsumowanie -->
			
			<div class="Opis">
			
			</div> <!-- zamknięcie diva Opis -->
			
			<div class="PodpisN">
				<label>Podpis Nabywcy:</label><br></br><br></br><br></br>
				<p>.....................................................................................</p>
			</div> <!-- zamknięcie diva PodpisN -->
			
			<div class="PodpisS">
				<label id="Podpis">Podpis Sprzedawcy:</label><br></br><br></br><br></br>
				<p>.....................................................................................</p>
			</div> <!-- zamknięcie diva PodpisS -->

		</div> <!-- zamknięcie diva Faktura -->
	
		<div id="menuCol">
			<label>Dodaj nowy wiersz/usługę w tabeli sprzedaży</label><br></br>
			<button type="button" onclick="nowyWiersz()">Nowa linia!</button>
		<br></br>
			<label>Drukuj fakturę!</label><br></br>
			<button type="button" onclick="PrintElem('Faktura')">Druk</button>
		</div> <!-- zamknięcie diva menuCol -->
		
			
		<script>
		
		
		function aktualizacja1(ii)
			{
			var changedRow = ii.rowIndex;
			
			if(typeof changedRow === 'undefined') changedRow = 2;
						
			var table = document.getElementById("TabelaSprzedazy");
			var number;
			//Pierwsza tabela
			//wartość bez Vat
				var x = table.rows[changedRow].cells[3].children[0].value;
				var y = table.rows[changedRow].cells[4].children[0].value;
								
				x = parseFloat(x.replace(",","."));	
				y = parseFloat(y.replace(",","."));	
				x *= y;
				x = x.toFixed(2);
				
				table.rows[changedRow].cells[7].innerHTML = x;
					
			//Vat
				//var number;
				y = table.rows[changedRow].cells[5].innerHTML;
				if(y == "zw") number = 0;
				else if(y == "0%") number = 0;
				else if(y == "8%") number = 0.08;
				else if(y == "23%") number = 0.23;
						
				x *= number;
				x = x.toFixed(2);
				
				table.rows[changedRow].cells[6].innerHTML = x;
						
			//wartość z Vat
				x = table.rows[changedRow].cells[6].innerHTML;
				y = table.rows[changedRow].cells[7].innerHTML;
				x = parseFloat(x.replace(",","."));
				y = parseFloat(y.replace(",","."));
				x += y;
				x = x.toFixed(2);	
				
				table.rows[changedRow].cells[8].innerHTML = x;
			
			//Druga tabela
			//sumy z tabeli sprzedaży dla poszczególnych podatków
				var rowCount = table.rows.length;			
				var sum1 = 0, sum2 = 0, sum3 = 0;
				
				var tds = table.getElementsByClassName('VatZl');
				sum1 = 0;
				for(var i=0; i<rowCount-2; i++)
				{
					x = tds[i].innerText;
					x = parseFloat(x);
					sum1 += x;
				}
				sum1 = parseFloat(Math.round(sum1 * 100) / 100).toFixed(2);
				
				tds = table.getElementsByClassName('BezVat');
				sum2 = 0;
				for(i=0; i<rowCount-2; i++)
				{
					x = tds[i].innerText;
					x = parseFloat(x);
					sum2 += x;
				}
				sum2 = parseFloat(Math.round(sum2 * 100) / 100).toFixed(2);
				
				tds = table.getElementsByClassName('ZVat');
				sum3 = 0;
				for(i=0; i<rowCount-2; i++)
				{
					x = tds[i].innerText;
					x = parseFloat(x);
					sum3 += x;
				}
				sum3 = parseFloat(Math.round(sum3 * 100) / 100).toFixed(2);
			
			
				var table2 = document.getElementById("PodsumowanieVat");
				var number;
				var xx = table.rows[2].cells[5].innerHTML;
				if(xx == "zw")
				{
					table2.rows[0].cells[1].innerHTML = sum1; //suma Vat zł dla zw podatku
					table2.rows[0].cells[2].innerHTML = sum2; //suma Kwot bez Vat dla zw podatku
					table2.rows[0].cells[3].innerHTML = sum3; //suma Kwot z Vat dla zw podatku
				}
				if(xx == "0%")
				{
					table2.rows[1].cells[1].innerHTML = sum1; //suma Vat zł dla 0% podatku
					table2.rows[1].cells[2].innerHTML = sum2; //suma Kwot bez Vat dla 0% podatku
					table2.rows[1].cells[3].innerHTML = sum3; //suma Kwot z Vat dla 0% podatku
				}
				if(xx == "8%")
				{
					table2.rows[2].cells[1].innerHTML = sum1; //suma Vat zł dla 8% podatku
					table2.rows[2].cells[2].innerHTML = sum2; //suma Kwot bez Vat dla 8% podatku
					table2.rows[2].cells[3].innerHTML = sum3; //suma Kwot z Vat dla 8% podatku
				}
				if(xx == "23%")
				{
					table2.rows[3].cells[1].innerHTML = sum1; //suma Vat zł dla 23% podatku
					table2.rows[3].cells[2].innerHTML = sum2; //suma Kwot bez Vat dla 23% podatku
					table2.rows[3].cells[3].innerHTML = sum3; //suma Kwot z Vat dla 23% podatku
				}
									
			//sumy dla kolumn
				
				x = table2.rows.length - 1;
				
				var yy = 0;
				number = 0;
				y = 0;
				var i = 0;
				var j = 0;

				for(j=1;j<4;j++)
				{
					for(i=0;i<x;i++)
					{
						yy = table2.rows[i].cells[j].innerHTML;
						number = parseFloat(yy.replace(",","."));		
						y += number;
					}
					
					number = number.toFixed(2);
					number = y.toLocaleString('en-US', {minimumFractionDigits: 2});	
					
					table2.rows[4].cells[j].innerHTML = number + " zł";
					yy = 0;
					y = 0;
					number = 0;
				}
			
			} //koniec funkcji aktualizacja
			
			function nowyWiersz()
			{
				var tableRow = document.getElementById("Linia1");
				var table = document.getElementById("TabelaSprzedazy");
				var clone = tableRow.cloneNode(true); // copy children too
				clone.id = "newID"; // change id or other attributes/contents
				table.appendChild(clone); // add new row to end of table
				
				var rowCount = table.rows.length;
				
				table.rows[rowCount-1].cells[0].innerHTML = rowCount - 2;
				
				aktualizacja1(2);
			}
			
			function PrintElem(printpage)
			{
				window.alert("Niebede drukowała!!!!!");
			}
			
			aktualizacja1(2);
		</script>
</body>

</html>